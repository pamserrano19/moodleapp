{"version":3,"sources":["./src/core/features/login/components/sites/sites.html","./src/core/features/login/components/components.module.ts","./src/core/features/login/components/sites/sites.ts","./src/core/features/login/sitelist.scss"],"names":[],"mappings":"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","file":"default~addons-blog-blog-lazy-module~addons-calendar-pages-index-index-module~features-tag-pages-sea~df80fb99.js","sourcesContent":["export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-button fill=\\\"clear\\\" (click)=\\\"close($event)\\\" [attr.aria-label]=\\\"'core.back' | translate\\\">\\r\\n                <ion-icon name=\\\"arrow-back\\\" slot=\\\"icon-only\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n            </ion-button>\\r\\n        </ion-buttons>\\r\\n\\r\\n        <ion-title>\\r\\n            <h1>{{ 'core.mainmenu.switchaccount' | translate }}</h1>\\r\\n        </ion-title>\\r\\n\\r\\n        <ion-buttons slot=\\\"end\\\">\\r\\n            <ion-button fill=\\\"clear\\\" *ngIf=\\\"accountsList.count > 1\\\" (click)=\\\"toggleDelete()\\\"\\r\\n                [attr.aria-label]=\\\"'core.login.toggleremove' | translate\\\">\\r\\n                <ion-icon slot=\\\"icon-only\\\" name=\\\"fas-pen\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n            </ion-button>\\r\\n        </ion-buttons>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n    <core-loading [hideUntil]=\\\"loaded\\\">\\r\\n        <ion-list class=\\\"core-sitelist\\\">\\r\\n            <ion-card *ngIf=\\\"accountsList.currentSite\\\">\\r\\n                <ion-item-divider sticky=\\\"true\\\" class=\\\"core-sitelist-sitename\\\">\\r\\n                    <ion-label>\\r\\n                        <h2>\\r\\n                            <core-format-text [text]=\\\"accountsList.currentSite.siteName\\\" clean=\\\"true\\\"\\r\\n                                [siteId]=\\\"accountsList.currentSite.id\\\"></core-format-text>\\r\\n                        </h2>\\r\\n                        <p><a [href]=\\\"accountsList.currentSite.siteUrl\\\" core-link autoLogin=\\\"yes\\\">{{\\r\\n                                accountsList.currentSite.siteUrlWithoutProtocol }}</a>\\r\\n                        </p>\\r\\n                    </ion-label>\\r\\n                </ion-item-divider>\\r\\n\\r\\n                <ion-item detail=\\\"false\\\">\\r\\n                    <ion-avatar slot=\\\"start\\\">\\r\\n                        <img [src]=\\\"accountsList.currentSite.avatar\\\" core-external-content [siteId]=\\\"accountsList.currentSite.id\\\"\\r\\n                            alt=\\\"{{ 'core.pictureof' | translate:{$a: accountsList.currentSite.fullName} }}\\\"\\r\\n                            onError=\\\"this.src='assets/img/user-avatar.png'\\\">\\r\\n                    </ion-avatar>\\r\\n                    <ion-label>\\r\\n                        <p class=\\\"item-heading\\\">{{accountsList.currentSite.fullName}}</p>\\r\\n                    </ion-label>\\r\\n                    <ion-icon color=\\\"success\\\" name=\\\"fas-check\\\"></ion-icon>\\r\\n                </ion-item>\\r\\n\\r\\n                <ng-container *ngTemplateOutlet=\\\"siteList; context: {sites: accountsList.sameSite}\\\"></ng-container>\\r\\n            </ion-card>\\r\\n\\r\\n            <ion-card *ngFor=\\\"let sites of accountsList.otherSites\\\">\\r\\n                <ion-item-divider sticky=\\\"true\\\" *ngIf=\\\"sites[0]\\\" class=\\\"core-sitelist-sitename\\\">\\r\\n                    <ion-label>\\r\\n                        <h2>\\r\\n                            <core-format-text [text]=\\\"sites[0].siteName\\\" clean=\\\"true\\\" [siteId]=\\\"sites[0].id\\\"></core-format-text>\\r\\n                        </h2>\\r\\n                        <p><a [href]=\\\"sites[0].siteUrl\\\" core-link autoLogin=\\\"no\\\">{{ sites[0].siteUrlWithoutProtocol }}</a></p>\\r\\n                    </ion-label>\\r\\n                </ion-item-divider>\\r\\n\\r\\n                <ng-container *ngTemplateOutlet=\\\"siteList; context: {sites: sites}\\\"></ng-container>\\r\\n            </ion-card>\\r\\n\\r\\n        </ion-list>\\r\\n    </core-loading>\\r\\n    <ion-fab slot=\\\"fixed\\\" core-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\">\\r\\n        <ion-fab-button (click)=\\\"add($event)\\\" [attr.aria-label]=\\\"'core.login.add' | translate\\\">\\r\\n            <ion-icon name=\\\"fas-plus\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n            <span class=\\\"sr-only\\\">{{ 'core.login.add' | translate }}</span>\\r\\n        </ion-fab-button>\\r\\n    </ion-fab>\\r\\n</ion-content>\\r\\n\\r\\n<!-- Template to render a list of sites. -->\\r\\n<ng-template #siteList let-sites=\\\"sites\\\">\\r\\n    <ion-item button *ngFor=\\\"let site of sites\\\" (click)=\\\"login($event, site.id)\\\" detail=\\\"true\\\">\\r\\n        <ion-avatar slot=\\\"start\\\">\\r\\n            <img [src]=\\\"site.avatar\\\" core-external-content [siteId]=\\\"site.id\\\" alt=\\\"{{ 'core.pictureof' | translate:{$a: site.fullName} }}\\\"\\r\\n                onError=\\\"this.src='assets/img/user-avatar.png'\\\">\\r\\n        </ion-avatar>\\r\\n        <ion-label>\\r\\n            <p class=\\\"item-heading\\\">{{site.fullName}}</p>\\r\\n        </ion-label>\\r\\n        <ion-badge slot=\\\"end\\\" *ngIf=\\\"!showDelete && site.badge\\\" @coreShowHideAnimation>\\r\\n            <span aria-hidden=\\\"true\\\">{{site.badge}}</span>\\r\\n            <span class=\\\"sr-only\\\">{{ 'core.login.sitebadgedescription' | translate:{ count: site.badge }\\r\\n                }}</span>\\r\\n        </ion-badge>\\r\\n        <ion-button *ngIf=\\\"showDelete\\\" slot=\\\"end\\\" fill=\\\"clear\\\" color=\\\"danger\\\" (click)=\\\"deleteSite($event, site)\\\"\\r\\n            [attr.aria-label]=\\\"'core.login.removeaccount' | translate\\\" [@coreSlideInOut]=\\\"'fromRight'\\\">\\r\\n            <ion-icon name=\\\"fas-trash\\\" slot=\\\"icon-only\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n    </ion-item>\\r\\n</ng-template>\\r\\n\";","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { CoreSharedModule } from '@/core/shared.module';\nimport { CoreLoginSiteOnboardingComponent } from './site-onboarding/site-onboarding';\nimport { CoreLoginSiteHelpComponent } from './site-help/site-help';\nimport { CoreLoginSitesComponent } from './sites/sites';\n\n@NgModule({\n    declarations: [\n        CoreLoginSiteOnboardingComponent,\n        CoreLoginSiteHelpComponent,\n        CoreLoginSitesComponent,\n    ],\n    imports: [\n        CoreSharedModule,\n    ],\n    exports: [\n        CoreLoginSiteOnboardingComponent,\n        CoreLoginSiteHelpComponent,\n        CoreLoginSitesComponent,\n    ],\n})\nexport class CoreLoginComponentsModule {}\n","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { Component, OnInit } from '@angular/core';\n\nimport { CoreSiteBasicInfo, CoreSites } from '@services/sites';\nimport { CoreAccountsList, CoreLoginHelper } from '@features/login/services/login-helper';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreFilter } from '@features/filter/services/filter';\nimport { CoreAnimations } from '@components/animations';\nimport { ModalController } from '@singletons';\n\n/**\n * Component that displays a \"splash screen\" while the app is being initialized.\n */\n@Component({\n    selector: 'core-login-sites',\n    templateUrl: 'sites.html',\n    styleUrls: ['../../sitelist.scss'],\n    animations: [CoreAnimations.SLIDE_IN_OUT, CoreAnimations.SHOW_HIDE],\n})\nexport class CoreLoginSitesComponent implements OnInit {\n\n    accountsList: CoreAccountsList = {\n        sameSite: [],\n        otherSites: [],\n        count: 0,\n    };\n\n    showDelete = false;\n    currentSiteId: string;\n    loaded = false;\n\n    constructor() {\n        this.currentSiteId = CoreSites.getRequiredCurrentSite().getId();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        this.accountsList = await CoreLoginHelper.getAccountsList(this.currentSiteId);\n        this.loaded = true;\n    }\n\n    /**\n     * Go to the page to add a site.\n     *\n     * @param event Click event.\n     */\n    async add(event: Event): Promise<void> {\n        await this.close(event, true);\n\n        await CoreLoginHelper.goToAddSite(true, true);\n    }\n\n    /**\n     * Delete a site.\n     *\n     * @param event Click event.\n     * @param site Site to delete.\n     * @return Promise resolved when done.\n     */\n    async deleteSite(event: Event, site: CoreSiteBasicInfo): Promise<void> {\n        event.stopPropagation();\n\n        let siteName = site.siteName || '';\n\n        siteName = await CoreFilter.formatText(siteName, { clean: true, singleLine: true, filter: false }, [], site.id);\n\n        try {\n            await CoreDomUtils.showDeleteConfirm('core.login.confirmdeletesite', { sitename: siteName });\n        } catch {\n            // User cancelled, stop.\n            return;\n        }\n\n        try {\n            await CoreLoginHelper.deleteAccountFromList(this.accountsList, site);\n\n            this.showDelete = false;\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'core.login.errordeletesite', true);\n        }\n    }\n\n    /**\n     * Login in a site.\n     *\n     * @param event Click event.\n     * @param siteId The site ID.\n     * @return Promise resolved when done.\n     */\n    async login(event: Event, siteId: string): Promise<void> {\n        await this.close(event, true);\n\n        // This navigation will logout and navigate to the site home.\n        await CoreNavigator.navigateToSiteHome({ preferCurrentTab: false , siteId });\n    }\n\n    /**\n     * Toggle delete.\n     */\n    toggleDelete(): void {\n        this.showDelete = !this.showDelete;\n    }\n\n    /**\n     * Close modal.\n     *\n     * @param event Click event.\n     */\n    async close(event: Event, closeAll = false): Promise<void> {\n        event.preventDefault();\n        event.stopPropagation();\n\n        await ModalController.dismiss(closeAll);\n    }\n\n}\n","export default \"ion-list.core-sitelist .core-sitelist-sitename {\\n  border-bottom: 1px solid var(--stroke);\\n}\\nion-list.core-sitelist .core-sitelist-sitename ion-label {\\n  margin-top: 8px;\\n  margin-bottom: 8px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9jb3JlL2ZlYXR1cmVzL2xvZ2luL3NpdGVsaXN0LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFNSSxzQ0FBQTtBQUxSO0FBQVE7RUFDSSxlQUFBO0VBQ0Esa0JBQUE7QUFFWiIsImZpbGUiOiJzcmMvY29yZS9mZWF0dXJlcy9sb2dpbi9zaXRlbGlzdC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWxpc3QuY29yZS1zaXRlbGlzdCB7XHJcbiAgICAuY29yZS1zaXRlbGlzdC1zaXRlbmFtZSB7XHJcbiAgICAgICAgaW9uLWxhYmVsIHtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xyXG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3Ryb2tlKTtcclxuICAgIH1cclxufVxyXG4iXX0= */\";"],"sourceRoot":"webpack:///"}