{"version":3,"sources":["./src/addons/competency/classes/competency-course-competencies-source.ts","./src/addons/competency/competency-course-contents-lazy.module.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAAqC;AACrC,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,iDAAiD;AACjD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;AAEoE;AAEnD;AAKlB;AACsC;AAEtE;;GAEG;AACI,MAAM,uCACT,SAAQ,kHAAoF;IAe5F,YAAY,QAAgB,EAAE,MAAe;QACzC,KAAK,EAAE,CAAC;QAER,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;IAC1B,CAAC;IAlBD;;OAEG;IACH,MAAM,CAAC,WAAW,CAAC,QAAgB,EAAE,MAAe;QAChD,OAAO,GAAG,QAAQ,IAAI,MAAM,IAAI,cAAc,EAAE,CAAC;IACrD,CAAC;IAeD;;OAEG;IACH,WAAW,CAAC,UAAkE;QAC1E,OAAO,MAAM,CAAC,UAAU,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;IAC5C,CAAC;IAED;;OAEG;IACG,IAAI;;;;;YACN,IAAI,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;gBACxC,MAAM,IAAI,CAAC,sBAAsB,EAAE,CAAC;aACvC;YAED,MAAM,OAAM,IAAI,WAAE,CAAC;QACvB,CAAC;KAAA;IAED;;OAEG;IACG,eAAe;;YACjB,MAAM,+DAAS,CAAC,YAAY,CAAC,oEAAe,CAAC,4BAA4B,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;QAC7G,CAAC;KAAA;IAED;;OAEG;IACa,aAAa;;YACzB,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;gBAC1B,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC,CAAC;aACnE;YAED,OAAO,EAAE,KAAK,EAAE,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE,CAAC;QAC3D,CAAC;KAAA;IAED;;OAEG;IACW,sBAAsB;;YAChC,CAAC,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;gBACrD,oEAAe,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC;gBACnE,iFAAqB,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC;aACjD,CAAC,CAAC;QACP,CAAC;KAAA;CAEJ;;;;;;;;;;;;;AChGD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAAqC;AACrC,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,iDAAiD;AACjD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;AAEQ;AACc;AAEoD;AACQ;AAEnH,MAAM,MAAM,GAAW;IACnB;QACI,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,uHAAqC;KACnD;CACJ,CAAC;IAQW,uCAAuC,SAAvC,uCAAuC;CAAG;AAA1C,uCAAuC;IANnD,8DAAQ,CAAC;QACN,OAAO,EAAE;YACL,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC7B,+HAA2C;SAC9C;KACJ,CAAC;GACW,uCAAuC,CAAG;AAAH","file":"competency-course-contents-lazy-module.js","sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreRoutedItemsManagerSource } from '@classes/items-management/routed-items-manager-source';\nimport { CoreUserProfile } from '@features/user/services/user';\nimport { CoreUtils } from '@services/utils/utils';\nimport {\n    AddonCompetency,\n    AddonCompetencyDataForCourseCompetenciesPageCompetency,\n    AddonCompetencyDataForCourseCompetenciesPageWSResponse,\n} from '../services/competency';\nimport { AddonCompetencyHelper } from '../services/competency-helper';\n\n/**\n * Provides a collection of course competencies.\n */\nexport class AddonCompetencyCourseCompetenciesSource\n    extends CoreRoutedItemsManagerSource<AddonCompetencyDataForCourseCompetenciesPageCompetency> {\n\n    /**\n     * @inheritdoc\n     */\n    static getSourceId(courseId: number, userId?: number): string {\n        return `${courseId}-${userId || 'current-user'}`;\n    }\n\n    readonly COURSE_ID: number;\n    readonly USER_ID?: number;\n\n    courseCompetencies?: AddonCompetencyDataForCourseCompetenciesPageWSResponse;\n    user?: CoreUserProfile;\n\n    constructor(courseId: number, userId?: number) {\n        super();\n\n        this.COURSE_ID = courseId;\n        this.USER_ID = userId;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getItemPath(competency: AddonCompetencyDataForCourseCompetenciesPageCompetency): string {\n        return String(competency.competency.id);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async load(): Promise<void> {\n        if (this.dirty || !this.courseCompetencies) {\n            await this.loadCourseCompetencies();\n        }\n\n        await super.load();\n    }\n\n    /**\n     * Invalidate course cache.\n     */\n    async invalidateCache(): Promise<void> {\n        await CoreUtils.ignoreErrors(AddonCompetency.invalidateCourseCompetencies(this.COURSE_ID, this.USER_ID));\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async loadPageItems(): Promise<{ items: AddonCompetencyDataForCourseCompetenciesPageCompetency[] }> {\n        if (!this.courseCompetencies) {\n            throw new Error('Can\\'t load competencies without course data');\n        }\n\n        return { items: this.courseCompetencies.competencies };\n    }\n\n    /**\n     * Load competencies.\n     */\n    private async loadCourseCompetencies(): Promise<void> {\n        [this.courseCompetencies, this.user] = await Promise.all([\n            AddonCompetency.getCourseCompetencies(this.COURSE_ID, this.USER_ID),\n            AddonCompetencyHelper.getProfile(this.USER_ID),\n        ]);\n    }\n\n}\n","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { AddonCompetencyCourseCompetenciesPage } from './pages/coursecompetencies/coursecompetencies.page';\nimport { AddonCompetencyCourseCompetenciesPageModule } from './pages/coursecompetencies/coursecompetencies.module';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: AddonCompetencyCourseCompetenciesPage,\n    },\n];\n\n@NgModule({\n    imports: [\n        RouterModule.forChild(routes),\n        AddonCompetencyCourseCompetenciesPageModule,\n    ],\n})\nexport class AddonCompetencyCourseContentsLazyModule {}\n"],"sourceRoot":"webpack:///"}